<!DOCTYPE html>
{% extends 'base.html' %}
{% block content %}
<div class="container w-75 p-4 bg-light mt-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
     <h3>Leads</h3>

  <!-- Add button visible to all roles -->
  {% if user_role in "Admin Manager Staff" %}
  <a href="{% url 'customers:lead_add' %}" class="btn btn-success mb-3">
    <i class="lucide lucide-plus-circle"></i> Add Lead
  </a>
  </div>

  {% endif %}

  {% if leads %}
  <table class="table table-bordered table-striped align-middle">
    <thead class="table-light">
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Status</th>
        {% if user_role in "Admin Manager" %}
        <th>Update</th>
        {% endif %}
        {% if user_role == "Admin" %}
        <th>Delete</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for lead in leads %}
      <tr>
        <td>{{ lead.name }}</td>
        <td>{{ lead.email }}</td>
        <td>{{ lead.phone }}</td>
        <td>{{ lead.status }}</td>

        {% if user_role in "Admin Manager" %}
        <td>
          <a href="{% url 'customers:lead_update' lead.id %}" class="btn btn-warning btn-sm">
            <i class="lucide lucide-edit"></i> Update
          </a>
        </td>
        {% endif %}

        {% if user_role == "Admin" %}
        <td>
          <a href="{% url 'customers:lead_delete' lead.id %}" class="btn btn-danger btn-sm">
            <i class="lucide lucide-trash-2"></i> Delete
          </a>
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p class="text-muted mt-3">No leads found.</p>
  {% endif %}
</div>
{% endblock %}

<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>

    .product-img {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: zoom-in;
    }
    .product-img:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }

    .action-btn {
        transition: 0.25s ease;
        border-radius: 8px !important;
    }
    .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }
</style>

<div class="container my-5">
    <div class="card shadow-lg p-4">

        <div class="row g-5">

            <div class="col-md-5 text-center">
                {% if product.image %}
                    <img src="{{ product.image.url }}"
                         class="img-fluid rounded border product-img"
                         alt="{{ product.name }}">
                {% else %}
                    <img src="{% static 'images/box.jpg' %}"
                         class="img-fluid rounded border product-img"
                         alt="No image">
                {% endif %}
            </div>

            <div class="col-md-7">
                <h2 class="fw-bold">{{ product.name }}</h2>
                <hr>
                <p><strong>Category:</strong> {{ product.category.name }}</p>
                <p><strong>SKU:</strong> {{ product.sku|default:"Not provided" }}</p>
                <p><strong>Price:</strong> ₹{{ product.selling_price }}</p>
                <p><strong>Min Selling Price:</strong> ₹{{ product.min_selling_price }}</p>
                <p><strong>Stock:</strong> {{ product.stock }}</p>

                {% if role == "Admin" %}
                    <p><strong>Source:</strong> {{ product.source }}</p>

                    {% if product.source == "Bought" %}
                        <p><strong>Buying Price:</strong> ₹{{ product.buying_price }}</p>
                    {% elif product.source == "Manufacture" %}
                        <p><strong>Manufacture Price:</strong> ₹{{ product.manufacture_price }}</p>
                    {% endif %}
                {% endif %}

                {% if product.specifications %}
                    <p class="mt-3"><strong>Specifications:</strong></p>
                    <p>{{ product.specifications }}</p>
                {% endif %}
                <hr>
                <div class="d-flex flex-wrap gap-4 mt-4 align-items-center">

                    {% if role == "Admin" or role == "Manager" %}

                        <a href="{% url 'inventory:product_edit' product.id %}"
                           class="btn btn-primary  px-4 action-btn">
                            <i class="fa-solid fa-pen"></i> Edit
                        </a>


    <form action="{% url 'inventory:product_delete' product.id %}"
      method="POST"
      onsubmit="return confirm('Are you sure you want to delete this product?');"
      style="display:inline-block; margin:0;">
    {% csrf_token %}

    <input type="hidden" name="next" value="{{ next }}">
    <input type="hidden" name="category_id" value="{{ category_id }}">

    <button class="btn btn-danger px-4 mx-2 action-btn">
        <i class="fa-solid fa-trash"></i> Delete
    </button>
    </form>
                    {% endif %}
                    <a href="{% url 'inventory:stock_update' product.id %}"
                       class="btn btn-success px-4 action-btn">
                        <i class="fa-solid fa-box"></i> Update Stock
                    </a>

                </div>

            </div>
        </div>

    </div>
</div>

{% endblock %}
